namespace = startup

character_event = {
	id = startup.1
	#desc = "startup.1.desc"
	
	is_triggered_only = yes #Triggered from on_startup
	only_rulers = yes
	
	trigger = {
		NOT = { has_global_flag = initialized }
		has_landed_title = k_naga
	}
	immediate = { 
		set_global_flag = initialized 
	}
	
	option = {
		#name = startup.1.A
			
		if = {
			limit = { year = 440 }
			# Structures on Valor
			1 = { #Virtus
				add_province_modifier = { name = ancient_ruins duration = -1 }
			}
			2 = { #Temperantia
				add_province_modifier = { name = ancient_ruins duration = -1 }
			}
			# The area in Ilia where Bern found that weather magic tome
			265 = { #Neandreia
				add_province_modifier = { name = ancient_ruins duration = -1 }
			}
			# Arcadia
			120 = { 
				add_province_modifier = { name = ancient_ruins duration = -1 }
			}
		}
		
		if = { # Lyn's Story
			limit = { 
				year = 1159
				NOT = { year = 1160 }
			}
			character_event = {
				id =  startup.3
			}
		}
		
		if = { # Binding Blade
			limit = { 
				year = 1180
				NOT = { year = 1181 }
			}
			character_event = {
				id =  startup.2
			}
		}
	}
}

# Binding Blade setup
character_event = {
	id = startup.2
	
	is_triggered_only = yes 
	
	immediate = {
		set_global_flag = scenario_fe6_binding_blade	
	}
	option = {
		random_character = {
			limit = {
				has_character_flag = is_fe6_zephiel
			}
			set_character_flag = searching_for_demon_dragon
			character_event = {
				id =  fe6.6
				days = 1
			}
		}
	}
}

# The Girl from the Plains setup
character_event = {
	id = startup.3
	
	is_triggered_only = yes 
	
	immediate = {
		if = {
			limit = {
				NOT = { has_global_flag = scenario_fe7_the_girl_from_the_plains }
				d_lyn = {
					has_holder = yes
					holder_scope = {						
						has_character_flag = is_fe7_lyn
						any_current_enemy = {
							has_landed_title = d_caelin
							has_character_flag = is_fe7_lundgren
						}
					}
				}
			}
			set_global_flag = scenario_fe7_the_girl_from_the_plains
			
			if = {
				limit = {
					has_game_rule = {
						name = RULE_FE_STORY
						value = on
					}
				}
				d_lyn = {
					holder_scope = {
						character_event = { id = fe7_lyn.1 days = 20 random = 5 }
					}
				}
			}
		}
	}
	option = {
		name = OK
	}
}